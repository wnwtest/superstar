<map version="freeplane 1.11.5">
<!--To view this file, download free mind mapping software Freeplane from https://www.freeplane.org -->
<node TEXT="wifi 基础知识" LOCALIZED_STYLE_REF="AutomaticLayout.level.root" FOLDED="false" ID="ID_1090958577" CREATED="1409300609620" MODIFIED="1715068662199">
<hook NAME="accessories/plugins/AutomaticLayout.properties" VALUE="ALL"/>
<font BOLD="true"/>
<hook NAME="MapStyle" background="#eeeeee">
    <properties show_icon_for_attributes="true" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff" show_note_icons="true" associatedTemplateLocation="template:/light_grey_straight_template.mm" fit_to_viewport="false"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24 pt">
<font SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="bottom_or_right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="default" ID="ID_1082331723" ICON_SIZE="12 pt" FORMAT_AS_HYPERLINK="false" COLOR="#222222" BACKGROUND_COLOR="#eeeeee" STYLE="rectangle" SHAPE_HORIZONTAL_MARGIN="8 pt" SHAPE_VERTICAL_MARGIN="5 pt" BORDER_WIDTH_LIKE_EDGE="false" BORDER_WIDTH="1.9 px" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#f0f0f0" BORDER_DASH_LIKE_EDGE="true" BORDER_DASH="SOLID" VGAP_QUANTITY="3 pt">
<arrowlink SHAPE="CUBIC_CURVE" COLOR="#000000" WIDTH="2" TRANSPARENCY="200" DASH="" FONT_SIZE="9" FONT_FAMILY="SansSerif" DESTINATION="ID_1082331723" STARTARROW="NONE" ENDARROW="DEFAULT"/>
<font SIZE="11" BOLD="false" STRIKETHROUGH="false" ITALIC="false"/>
<edge STYLE="horizontal" COLOR="#444444" WIDTH="3" DASH="SOLID"/>
<richcontent TYPE="DETAILS" CONTENT-TYPE="plain/auto"/>
<richcontent TYPE="NOTE" CONTENT-TYPE="plain/auto"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details"/>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes">
<font SIZE="9"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#f6f9a1" TEXT_ALIGN="LEFT"/>
<stylenode LOCALIZED_TEXT="defaultstyle.floating">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.selection" COLOR="#ffffff" BACKGROUND_COLOR="#3333ff" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#3333ff"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="bottom_or_right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="styles.important" ID="ID_334768726" COLOR="#443333" BACKGROUND_COLOR="#dddddd" BORDER_WIDTH="3 px" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#cc0033">
<icon BUILTIN="yes"/>
<arrowlink COLOR="#cc0033" TRANSPARENCY="255" DESTINATION="ID_334768726"/>
<font SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.flower" COLOR="#ffffff" BACKGROUND_COLOR="#255aba" STYLE="oval" TEXT_ALIGN="CENTER" BORDER_WIDTH_LIKE_EDGE="false" BORDER_WIDTH="22 pt" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#f9d71c" BORDER_DASH_LIKE_EDGE="false" BORDER_DASH="CLOSE_DOTS" MAX_WIDTH="6 cm" MIN_WIDTH="3 cm"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="bottom_or_right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#ffffff" BACKGROUND_COLOR="#000000" BORDER_COLOR_LIKE_EDGE="false" BORDER_COLOR="#2c2b29" BORDER_DASH_LIKE_EDGE="true">
<font SIZE="18"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#ffffff" BACKGROUND_COLOR="#222222" BORDER_COLOR="#2c2b29">
<font SIZE="16"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#ffffff" BACKGROUND_COLOR="#444444" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#f0f0f0">
<font SIZE="14"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#ffffff" BACKGROUND_COLOR="#676767" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#f0f0f0">
<font SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#ffffff" BACKGROUND_COLOR="#888888" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#f0f0f0">
<font SIZE="11"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" COLOR="#222222" BACKGROUND_COLOR="#aaaaaa" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#f0f0f0">
<font SIZE="11"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" COLOR="#222222" BACKGROUND_COLOR="#bbbbbb" BORDER_COLOR_LIKE_EDGE="true" BORDER_COLOR="#f0f0f0">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,7" COLOR="#222222" BACKGROUND_COLOR="#cccccc" BORDER_COLOR="#f0f0f0">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,8" COLOR="#222222" BACKGROUND_COLOR="#dddddd" BORDER_COLOR="#f0f0f0">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,9" COLOR="#222222" BACKGROUND_COLOR="#eeeeee" BORDER_COLOR="#f0f0f0">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,10" COLOR="#2c2b29" BACKGROUND_COLOR="#ffffff" BORDER_COLOR="#f0f0f0">
<font SIZE="9"/>
</stylenode>
</stylenode>
</stylenode>
</map_styles>
</hook>
<node TEXT="OSI/RM" POSITION="bottom_or_right" ID="ID_664762876" CREATED="1715129999194" MODIFIED="1715157233023" VGAP_QUANTITY="3 pt">
<node TEXT="Application Layer（应用层）" ID="ID_801312745" CREATED="1715130126485" MODIFIED="1715130168296"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">应用层能与应用程序界面沟通以达到向用户展示的目的。常见的协议有</span><span style="font-size: 18px; font-family: Times New Roman;">HTTP</span><span style="font-size: 18px;">、</span><span style="font-size: 18px; font-family: Times New Roman;">HTTPS</span><span style="font-size: 18px;">、</span><span style="font-size: 18px; font-family: Times New Roman;">FTP</span><span style="font-size: 18px;">、</span><span style="font-size: 18px; font-family: Times New Roman;">SMTP</span><span style="font-size: 18px;">等。其数据单位为</span><span style="font-size: 18px; font-family: Times New Roman;">APDU</span><span style="font-size: 18px;">（</span><span style="font-size: 18px; font-family: Times New Roman;">Application Protocol Data Unit</span><span style="font-size: 18px;">）</span>
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Presentation Layer（表示层）" ID="ID_1174840794" CREATED="1715130194317" MODIFIED="1715130232529"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">表示层能为不同客户端提供数据和信息的语法转换，使系统能解读成正确的数据，同时它还能提供压缩解压、加密解密等服务。</span>
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Session Layer（会话层）" ID="ID_951159596" CREATED="1715130251629" MODIFIED="1715130272721"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">会话层用于为通信双方制定通信方式，创建和注销会话（双方通信）等。其数据单位为</span><span style="font-size: 18px; font-family: Times New Roman;">SPDU</span><span style="font-size: 18px;">（</span><span style="font-size: 18px; font-family: Times New Roman;">Session Protocol Data Unit</span><span style="font-size: 18px;">）。常见的协议有</span><span style="font-size: 18px; font-family: Times New Roman;">ZIP</span><span style="font-size: 18px;">、</span><span style="font-size: 18px; font-family: Times New Roman;">AppleTalk</span><span style="font-size: 18px;">、</span><span style="font-size: 18px; font-family: Times New Roman;">SCP</span><span style="font-size: 18px;">等</span>
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Transport Layer（传输层）" ID="ID_1970394464" CREATED="1715130765382" MODIFIED="1715132157380"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">传输层用于控制数据流量，同时能进行调试及错误处理，以确保通信顺利。发送端的传输层会为数据分组加上序号，以方便接收端把分组重组为有用的数据或文件。传输层的常见协议有</span><span style="font-size: 18px; font-family: Times New Roman;">TCP</span><span style="font-size: 18px;">、</span><span style="font-size: 18px; font-family: Times New Roman;">UDP</span><span style="font-size: 18px;">等</span>
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Network Layer（网络层）" ID="ID_352186581" CREATED="1715131712814" MODIFIED="1715131715612"/>
<node TEXT="Data Link Layer（数据链路层）" ID="ID_1831096141" CREATED="1715132045332" MODIFIED="1715132114647"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      在物理层提供比特流服务的基础上，建立相邻结点之间的数据链路。通过差错控制提供数据帧（Frame）在信道上无差错的传输。数据链路层在不可靠的物理介质上提供可靠的传输。该层的作用包括：物理地址寻址、数据的成帧、流量控制、数据的检错、重发等。数据链路层数据的单位为Frame（帧）。常见的设备有二层交换机、网桥等
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Physical Layer（物理层）" ID="ID_213833756" CREATED="1715132101742" MODIFIED="1715132985512"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      物理层定义了通信设备机械、电气、功能和过程等方面的特性，用以建立、维护和拆除物理链路连接。物理层数据的单位为bit
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="LLC和MAC子层" POSITION="top_or_left" ID="ID_818063538" CREATED="1715133149243" MODIFIED="1715157194487">
<node TEXT="MAC Sub Layer（Media Acess Control SubLayer：媒介访问控制子层）" ID="ID_1519949608" CREATED="1715133526180" MODIFIED="1715134068509" VGAP_QUANTITY="3 pt"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">该子层的目的是为了解决局域网（</span><span style="font-size: 18px; font-family: Times New Roman;">Local Area Network</span><span style="font-size: 18px;">，以后简写为</span><span style="font-size: 18px; font-family: Times New Roman;">LAN</span><span style="font-size: 18px;">）中共用信道的使用产生竞争时，如何分配信道的使用权问题。目前</span><span style="font-size: 18px; font-family: Times New Roman;">LAN</span><span style="font-size: 18px;">中常用的媒介访问控制方法是</span><span style="font-size: 18px; font-family: Times New Roman;">CSMA/CD</span><span style="font-size: 18px;">（争用型介质访问控制）</span>
    </p>
  </body>
</html></richcontent>
<node TEXT="CSMA/CD（Carrier Sense Multiple Access/Collision Detect，载波监听多路访问/冲突检测机制）" ID="ID_43821335" CREATED="1715133865691" MODIFIED="1715134068507"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      工作站发送数据前先监听信道是否空闲，若空闲则立即发送数据。并且工作站在发送数据时，边发送边继续监听。若监听到冲突，则立即停止发送数据并等待一段随机时间，然后再重新尝试发送
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="CSMA/CA（Carrier Sense Multiple Access/Collision Avoidance，载波监听多路访问/冲突避免机制）" ID="ID_412416522" CREATED="1715134078675" MODIFIED="1715134117074"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      SMA/CA主要使用两种方法来避免碰撞：
    </p>
    <p>
      
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;设备发送数据前，先监听无线链路状态是否空闲。为了避免发生冲突，当无线链路被其他设备占用时，设备会随机为每一帧选择一段退避（backoff）时间。这样就能减少冲突的发生。
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;RTS-CTS握手（handshake）：设备发送帧前，先发送一个很小的RTS（Request to Send）帧给目标端，等待目标端回应CTS（Clear to Send）帧后，才开始传送。此方式可以确保接下来传送数据时，其他设备不会使用信道以避免冲突。由于RTS帧与CTS帧长度很小，使得整体开销也较小。
    </p>
    <p>
      ————————————————
    </p>
    <p>
      
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      原文链接：https://blog.csdn.net/Innost/article/details/20651445
    </p>
  </body>
</html></richcontent>
<node TEXT="RTS和CTS" ID="ID_1708829439" CREATED="1715134177051" MODIFIED="1715157218832"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      以工作站A和B之间传输数据为例，站B、站C、站E在站A 的无线信号覆盖的范围内，而站D不在其内。站A、站E、站D在站B的无线信号覆盖的范围内，但站C不在其内。
    </p>
    <p>
      如果站A要向站B发送数据，那么，站A在发送数据帧之前，要先向站B发送一个请求发送帧RTS（Request To Send）。在RTS帧中会说明将要发送的数据帧的长度。站B收到RTS帧后就向站A回应一个允许发送帧CTS（Clear To Send）。在CTS帧中也附上A欲发送的数据帧的长度（从RTS帧中将此数据复制到CTS帧中）。站A收到CTS帧后就可发送其数据帧了
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="MAC层Service" ID="ID_1829230700" CREATED="1715136979730" MODIFIED="1715157213655"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      协议还定义了SDU和PDU两个概念。当上一层调用MAC的request原语时，会把要发送的数据传给MAC层。这个数据被称为MAC Service Data Unit（简写为MSDU）。对MAC层来说，MSDU其实就是MAC要发送的数据，即载荷（Payload）。MAC层处理Payload时还会封装MAC层自己的一些头信息。这些信息和MSDU共同构成了MAC层的Protocol Data Unit（简写为MPDU）。从OSI/RM角度来看，经过N+1层封装后的数据是（N+1）-PDU。该数据传递给N层去处理时，对N层来说就是（N）-SDU。N层封装这个SDU后就变成自己的（N）-PDU了
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="LLC Sub Layer（逻辑链路控制子层）" ID="ID_1574205436" CREATED="1715133596637" MODIFIED="1715133624102"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">该子层实现了两个站点之间帧的交换，实现端到端（源到目的），无差错的帧传输和应答功能及流量控制功能</span>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT=" 802.11组件" POSITION="bottom_or_right" ID="ID_864639538" CREATED="1715137889113" MODIFIED="1715137892193">
<node TEXT=" 物理组件" ID="ID_780691667" CREATED="1715137910753" MODIFIED="1715157238815">
<node TEXT="Wireless Medium（无线媒介）" ID="ID_1531665264" CREATED="1715138408769" MODIFIED="1715138609780"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">本意指能传送无线</span><span style="font-size: 18px; font-family: Times New Roman;">MAC</span><span style="font-size: 18px;">帧数据的物理层。规范最早定义了射频和红外两种物理层，但目前使用最多的是射频物理层</span>
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Station（工作站）" ID="ID_1274229047" CREATED="1715138710577" MODIFIED="1715138774220"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      缩写为STA，其英文定义是“A logical entity that is a singly addressable instance of a MAC and PHY interface to the WM”。通俗点说，STA就是指携带有无线网络接口卡（即无线网卡）的设备，例如笔记本、智能手机等。另外，无线网卡和有线网卡的MAC地址均分配自同一个地址池以确保其唯一性
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Acess Point（接入点）" ID="ID_1334617576" CREATED="1715138716961" MODIFIED="1715138843580"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      缩写为AP，其原文定义是“An entity that contains one STA and provides access to the distribution services, via the WM for associated STAs”。由其定义可知，AP本身也是一个STA，只不过它还能为那些已经关联的（associated）STA提供分布式服务（distribution services）
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Distribution system（分布式系统）" ID="ID_1314462380" CREATED="1715138908152" MODIFIED="1715147375273"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      缩写为DS，其英文定义为“A system used to interconnect a set of basic service sets（BSSs）and integrated local area networks（LANs）to create an extended service set（ESS）”
    </p>
    <div>
      <p>
        在IEEE 802.11标准的无线局域网架构中，分布式系统(Distribution System, DS)是一个重要的组成部分。分布式系统是连接一个或多个基站（Access Points, AP）的后端网络，这使得在不同基站之间的无线客户端可以进行无缝的漫游和通信。
      </p>
      <p>
        在现实世界中，分布式系统通常由一些网络设备扮演，如网络交换机、路由器或者是无线控制器。这些设备在物理上可能是连接在一起的，也可能是通过无线或者其他网络技术（如Ethernet）连接在一起的。
      </p>
      <p>
        分布式系统并没有特定的操作系统或者结构说明，因为它更多的是一个逻辑概念，描述了如何在多个基站之间传输数据。然而，管理和控制分布式系统的设备（如无线控制器）可能会有自己的操作系统和网络结构。
      </p>
      <p>
        分布式系统的主要功能包括：
      </p>
      <ul>
        <li>
          关联和重关联服务：当无线设备移动到新的接入点范围内时，分布式系统负责维护其连通性。
        </li>
        <li>
          分发服务：当数据需要从一个接入点传送到另一个接入点时，分布式系统负责进行传送。
        </li>
        <li>
          集成服务：分布式系统将802.11网络与其他网络（如802.3 Ethernet）集成在一起。
        </li>
      </ul>
      <p>
        请注意，这些功能是通过使用特定的网络协议和技术实现的，如IP路由、网桥技术等。
      </p>
    </div>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="无线网络的构建" ID="ID_1099605143" CREATED="1715139799536" MODIFIED="1715157249071"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      。802.11规范中,基本服务集(Basic Service Set,BSS)是整个无线网络的基本构建组件(Basic Building Block)
    </p>
  </body>
</html></richcontent>
<node TEXT="Independent BSS（独立型BSS）" ID="ID_1942595020" CREATED="1715140032528" MODIFIED="1715140093882"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">这种类型的</span><span style="font-size: 18px; font-family: Times New Roman;">BSS</span><span style="font-size: 18px;">不需要</span><span style="font-size: 18px; font-family: Times New Roman;">AP</span><span style="font-size: 18px;">参与。各</span><span style="font-size: 18px; font-family: Times New Roman;">STA</span><span style="font-size: 18px;">之间可直接交互。这种网络也叫</span><span style="font-size: 18px; font-family: Times New Roman;">ad-hoc BSS</span><span style="font-size: 18px;">（一般译为自组网络或对等网络）</span>
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Infrastructure BSS（基础结构型BSS）" ID="ID_1798691030" CREATED="1715140048112" MODIFIED="1715140116723"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-size: 18px;">所有</span><span style="font-size: 18px; font-family: Times New Roman;">STA</span><span style="font-size: 18px;">之间的交互必须经过</span><span style="font-size: 18px; font-family: Times New Roman;">AP</span><span style="font-size: 18px;">。</span><span style="font-size: 18px; font-family: Times New Roman;">AP</span><span style="font-size: 18px;">是基础结构型</span><span style="font-size: 18px; font-family: Times New Roman;">BSS</span><span style="font-size: 18px;">的中控台。这也是家庭或工作中最常见的网络架构。在这种网络中，一个</span><span style="font-size: 18px; font-family: Times New Roman;">STA</span><span style="font-size: 18px;">必须完成诸如关联、授权等步骤后才能加入某个</span><span style="font-size: 18px; font-family: Times New Roman;">BSS</span><span style="font-size: 18px;">。注意，一个</span><span style="font-size: 18px; font-family: Times New Roman;">STA</span><span style="font-size: 18px;">一次只能属于一个</span><span style="font-size: 18px; font-family: Times New Roman;">BSS</span>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="ESS Extended Service Set：扩展服务集" ID="ID_119615538" CREATED="1715145163581" MODIFIED="1715157258327"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      ESS在规范中的定义是“A set of one or one interconnected BSSs that appears as a single BSS to the LLC layer at any STA associated with one of those BSSs”
    </p>
  </body>
</html></richcontent>
<node TEXT="Identification" ID="ID_640615938" CREATED="1715147666988" MODIFIED="1715147670187">
<node TEXT="BSSID(BSS Identification)" ID="ID_68428630" CREATED="1715147676324" MODIFIED="1715147740639"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      每一个BSS都有自己的唯一编号。在基础结构型网络中,BSSID就是AP的MAC地址,该MAC地址是真实的地址。IBSS中,其BSSID也是一个MAC地址,不过这个MAC地址是随机生成的
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="SSID(Service Set Identification)" ID="ID_720487315" CREATED="1715147766084" MODIFIED="1715147848078"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      BSSID会和一个SSID关联。BSSID是MAC地址,而SSID就是网络名。网络名往往是一个可读字符串
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node TEXT="802.11 Service" POSITION="top_or_left" ID="ID_169572485" CREATED="1715149088884" MODIFIED="1715157205960">
<node TEXT="SS(Station Service)" ID="ID_1531555672" CREATED="1715149252563" MODIFIED="1715149255731"/>
<node TEXT="DSS(Distribution System Service)" ID="ID_426195892" CREATED="1715149273539" MODIFIED="1715149276891"/>
<node TEXT="数据传输相关服务" ID="ID_1955005871" CREATED="1715149516698" MODIFIED="1715149520419">
<node TEXT="Distribution Service(DS,分布式服务)" ID="ID_1551001743" CREATED="1715149617794" MODIFIED="1715149620747"/>
<node TEXT="Integration Service(IS,整合服务)" ID="ID_275487424" CREATED="1715149629243" MODIFIED="1715149652619"/>
</node>
<node TEXT="association reassociation  disassociation服务" ID="ID_1446685378" CREATED="1715150316507" MODIFIED="1715150340115">
<node TEXT="Transition Type" ID="ID_1520627019" CREATED="1715150430171" MODIFIED="1715150433490">
<node TEXT="No-Transition" ID="ID_1052137820" CREATED="1715150452546" MODIFIED="1715150519581"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      没有移动 包括固定不动的情况以及在某个AP无线覆盖范围内移动
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="BSS-Transition" ID="ID_1032717246" CREATED="1715150526122" MODIFIED="1715150579822"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      从ESS中的一个BSS切换到另一个BSS
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="ESS-Transition" ID="ID_1032132181" CREATED="1715150606987" MODIFIED="1715150630789"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      从一个ESS中的BSS切换到位于另外一个ESS的BSS
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node TEXT="访问控制和数据机密性 Access Control and Data Confidentiality" ID="ID_1547639765" CREATED="1715154249281" MODIFIED="1715154285161">
<node TEXT="Authentication和Deauthentication" ID="ID_469120672" CREATED="1715155712200" MODIFIED="1715155737732"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      身份验证以及解除身份验证
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Confidentiality" ID="ID_515248804" CREATED="1715155770088" MODIFIED="1715155795620"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      私密性(privacy)服务
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="频谱管理服务" ID="ID_1726315275" CREATED="1715155839759" MODIFIED="1715155843616">
<node TEXT="TPC(Transmit Power Control,传输功率控制)" ID="ID_681945427" CREATED="1715155857952" MODIFIED="1715155865712"/>
<node TEXT="DFS(Dynamic Frequency Selection,动态频率选择)" ID="ID_1490874444" CREATED="1715155883704" MODIFIED="1715155889464"/>
</node>
<node TEXT="QoS和时间同步服务" ID="ID_1994417621" CREATED="1715156064336" MODIFIED="1715157884008"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      QoS来源于802.11e
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="无线电测量服务" ID="ID_449751004" CREATED="1715157801303" MODIFIED="1715157952737"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    无线电测量(Radio Measurement)服务为上层应用提供查询无线电相关信息的接口。 ·通过无线电测量来获取周围AP的信息。 ·能够在所支持的信道上进行无线电测量 无线电测量服务来源于802.11k
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="802.11 MAC服务和帧" POSITION="bottom_or_right" ID="ID_613057761" CREATED="1715158105798" MODIFIED="1715158110183">
<node TEXT="MAC服务" ID="ID_1195347683" CREATED="1715158158614" MODIFIED="1715158171230">
<node TEXT="MA-UNITDATA.request" ID="ID_876011946" CREATED="1715158178774" MODIFIED="1715158231977"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      供LLC层发送数据
    </p>
  </body>
</html></richcontent>
<node TEXT="parameter" ID="ID_224970673" CREATED="1715158514367" MODIFIED="1715158765058"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      MA-UNITDATA.request(
    </p>
    <p>
      source address&#xa0;// 指定本次数据发送端的MAC地址
    </p>
    <p>
      destination address // 指定接收端的MAC地址。可以是组播或广播地址
    </p>
    <p>
      routing information // 路由信息。对于802.11来说,该值为null(表示该值没有作用)
    </p>
    <p>
      data&#xa0;// MSDU,即上层需要发送的数据。对802.11来说,其大小不能超过2304字节
    </p>
    <p>
      priority&#xa0;
    </p>
    <p>
      service class
    </p>
    <p>
      )
    </p>
    <p>
      ·priority的取值为0~15的整数。对于非QoS相关的操作,其取值为Contention和
    </p>
    <p>
      ContentionFree。802.11中,QoS设置了不同的用户优先级(User Priority,UP)。显然,UP高
    </p>
    <p>
      的数据将优先得到发送。Priority参数和QoS中的其他参数一起决定发送数据的优先级
    </p>
    <p>
      ·service class的取值也针对是否为QoS而有所不同。对于非QoS,取值可为ReorderableGroupAddressed或StrictlyOdered。
    </p>
    <p>
      这两个都和数据发送时是否重排(reorder)发送次序有关。非QoS情况下,STA发送数据时并不会主动去调整发送次序。而QoS情况下,很明显那些
    </p>
    <p>
      UP较高的数据见得到优先处理。但对于组播数据,发送者可以设置service class为ReorderableGroupAddressed进行次序调整
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="MA-UNITDATA.indication" ID="ID_1047047830" CREATED="1715158180238" MODIFIED="1715158281553"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      通知LLC层进行数据接收
    </p>
  </body>
</html></richcontent>
<node TEXT="parameter" ID="ID_560973183" CREATED="1715158801190" MODIFIED="1715158870786"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      MA-UNITDATA.indication(
    </p>
    <p>
      source address&#xa0;// 代表数据源MAC地址。其值取值MAC帧中的SA
    </p>
    <p>
      destination address // 代表目标MAC地址,取自MAC帧中的DA,可以是组播地址
    </p>
    <p>
      routing information // 值为null
    </p>
    <p>
      data&#xa0;// MAC帧数据
    </p>
    <p>
      reception status&#xa0;// 表示接收状态,例如成功或失败。对802.11来说,该状态永远返回success
    </p>
    <p>
      // MAC层会丢弃那些错误的数据包
    </p>
    <p>
      priority
    </p>
    <p>
      service class
    </p>
    <p>
      )
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="MA-UNITDATA-STATUS.indication" ID="ID_950657933" CREATED="1715158185446" MODIFIED="1715158320841"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      通知LLC层自己(即MAC层)的状态
    </p>
  </body>
</html></richcontent>
<node TEXT="parameter" ID="ID_1123868601" CREATED="1715159116302" MODIFIED="1715159172914"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      MA-UNITDATA-STATUS.indication(
    </p>
    <p>
      // source和destination address和对应request的前两个参数一样
    </p>
    <p>
      source address
    </p>
    <p>
      destination address
    </p>
    <p>
      transmission status // 返回request的处理情况,
    </p>
    <p>
      provided priority // 只有status返回成功,该参数才有意义。其值和调用request发送数据时的值一致
    </p>
    <p>
      provided service class&#xa0;// 只有status返回成功,该参数才有意义
    </p>
    <p>
      )
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node TEXT="MAC帧" ID="ID_1257838640" CREATED="1715159989453" MODIFIED="1715160090424"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      MAC帧由以下三个基本域组成。
    </p>
    <p>
      ·MAC Header:包括帧控制(Frame Control)、时长(Duration)、地址(Address)等。
    </p>
    <p>
      ·Frame Body:代表数据域。这部分内容的长度可变,其具体存储的内容由帧类型(type)和子类型(sub type)决定。
    </p>
    <p>
      ·FCS:(Frame Check Sequence,帧校验序列)用于保障帧数据完整性。
    </p>
  </body>
</html></richcontent>
<node TEXT="Frame Control域" ID="ID_1582425604" CREATED="1715160202972" MODIFIED="1715161635056"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Frame Control域共2字节16位
    </p>
    <p>
      ·Protocol Version:代表802.11 MAC帧的版本号。目前的值是0。
    </p>
    <p>
      ·Type和Subtype:这两个字段用于指明MAC帧的类型。802.11中MAC帧可划分为三种类型,分别是control、data和management,每种类型的帧用于完成不同功能。
    </p>
    <p>
      ·To DS和From DS:只用在数据类型的帧中。
    </p>
    <p>
      ·More Fragments:表明数据是否分片。只支持data和management帧类型。
    </p>
    <p>
      ·Retry:如果该值为1,表明是重传包。
    </p>
    <p>
      ·Power Management:表明发送该帧的STA处于活跃模式还是处于省电模式。
    </p>
    <p>
      ·More Data:和省电模式有关。AP会为那些处于省电模式下的STA缓冲一些数据帧,而STA会定时查询是否有数据要接收。该参数表示AP中还有缓冲的数据帧。如果该值为0,表明STA已经接收完数据帧了
    </p>
    <p>
      ·Protected Frame:表明数据是否加密。
    </p>
    <p>
      ·Order:指明接收端必须按顺序处理该帧。
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Duration/ID域" ID="ID_99255483" CREATED="1715161669676" MODIFIED="1715161723767"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Duration/ID域占2字节共16位,其具体含义根据Type和Subtype的不同而变化,不过大体就两种,分别代表ID和Duration
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Address域" ID="ID_458759500" CREATED="1715161889836" MODIFIED="1715162006352"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      根据IEEE 802.3 协议,MAC地址有如下特点。
    </p>
    <p>
      ·MAC地址可用6字节的十六进制来表示,如1C-6F-65-8C-47-D1。
    </p>
    <p>
      ·MAC地址的组成包括两个部分。0~23位是厂商向IETF等机构申请用来标识厂商的代码,也称为“组织唯一标识符”(Organizationally Unique Identifier,OUI)。后24位是各个厂商制造的所有
    </p>
    <p>
      网卡的一个唯一编号。
    </p>
    <p>
      ·第48位用于表示这个地址是组播地址还是单播地址。如果这一位是0,表示此MAC地址是单播地址;如果这位是1,表示此MAC地址是组播地址。例如01-XX-XX-XX-XX-XX为组播地址。另
    </p>
    <p>
      外,如果地址全为1,例如FF-FF-FF-FF-FF-FF,则为MAC广播地址。
    </p>
    <p>
      ·第47位表示该MAC地址是全球唯一的还是本地唯一。故该位也称为G/L位
    </p>
  </body>
</html></richcontent>
<node TEXT="BSSID" ID="ID_1710247743" CREATED="1715163113115" MODIFIED="1715163116012"/>
<node TEXT="目标地址(Destination Address,DA)" ID="ID_354229956" CREATED="1715163118819" MODIFIED="1715163302816"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      用来描述MAC数据包最终接收者(final recipient),可以是单播或组播地址
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="源地址(Source Address,SA)" ID="ID_914566446" CREATED="1715163120259" MODIFIED="1715163276552"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      用来描述最初发出MAC数据包的STA地址。一般情况下都是单播地址。
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="发送STA地址(Transmitter Address,TA)" ID="ID_1117551575" CREATED="1715163121251" MODIFIED="1715163252848"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      用于描述将MAC数据包发送到WM中的STA地址
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="接收STA地址(Receiver Address,RA)" ID="ID_1449749510" CREATED="1715163219075" MODIFIED="1715163369127"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      用于描述接收MAC帧数据的。如果某个MAC帧数据接收者也是STA,那么RA和DA一样。但如果接收者不是无线工作站,而是比如以太网中的某台PC,那么DA就是该机器的MAC地址,而RA则是AP的MAC地址。这就表明该帧将先发给AP,然后由AP转发给PC
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Address 1 Address 2 Address 3" ID="ID_1813085987" CREATED="1715163887259" MODIFIED="1715163927292"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      MAC帧头中包含四个Address域,在不同的情况下,每个域中包含不同的地址。原则是Address 1代表接收地址,Address 2代表发送端地址,Address 3辅助用,Address 4用于无线桥接或Mesh BSS网络中。
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="Sequence Control域" ID="ID_654884796" CREATED="1715163979011" MODIFIED="1715164017190"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Sequence Control域长16位,前4位代表片段编号(Fragment Number),后12位为帧顺序编号(Sequence Number)
    </p>
  </body>
</html></richcontent>
<node TEXT="Sequence Number" ID="ID_1495734847" CREATED="1715164175035" MODIFIED="1715164246446"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      STA每次发送数据帧时 都会设置一个帧顺序编号。
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Fragment Number" ID="ID_1841985791" CREATED="1715164176427" MODIFIED="1715164301629"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      用于控制分片帧。如果数据量太大,则MAC层会将其分片发送。每个分片帧都有对应的分片编号
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="控制帧" ID="ID_1748523539" CREATED="1715164366362" MODIFIED="1715164434031"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      控制帧的作用包括协助数据帧的传递、管理无线媒介的访问等。
    </p>
  </body>
</html></richcontent>
<node TEXT="RTS(Request To Send)" ID="ID_660417020" CREATED="1715164456794" MODIFIED="1715164459843"/>
<node TEXT="CTS(Clear To Send)" ID="ID_1229549608" CREATED="1715164470380" MODIFIED="1715164477124"/>
<node TEXT="ACK" ID="ID_873446329" CREATED="1715164503266" MODIFIED="1715164542766"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      802.11中,MAC以及任何数据的传输都需要得到肯定确认
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="PS-POLL" ID="ID_1316180776" CREATED="1715164558787" MODIFIED="1715164590894"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      该控制帧被STA用于从AP中获取因省电模式而缓存的数据。其中AID的值是STA和AP关联时,由AP赋给该STA的
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="管理帧" ID="ID_864685271" CREATED="1715164367996" MODIFIED="1715164712531">
<node TEXT="Beacon(信标)帧" ID="ID_27530989" CREATED="1715164747378" MODIFIED="1715231965124"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      AP定时发送Beacon帧用来声明某个网络。这样,STA通过Beacon帧就知道该网络还存在
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Association Request/Response(关联请求/回复)帧" ID="ID_67007387" CREATED="1715164763138" MODIFIED="1715232292571"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      当STA需要关联到某个AP时,将发送此帧。针对Association Request帧,AP会回复一个Association Response帧用于通知关联请求处理结果。
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Probe Request/Response(探测请求/回复)帧" ID="ID_144526142" CREATED="1715164783370" MODIFIED="1715232203139"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      STA除了监听Beacon帧以了解网络信息外,还可以发送Probe Request帧用于搜索周围的无线网络。规范要求由送出Beacon帧的STA回复Probe Response帧,这样,在基础结构型网络中,Beacon帧只能由AP发送,故Probe Response也由AP发送。IBSS中,STA轮流发送Beacon帧,故Probe Response由最后一次发送Beacon帧的STA发送。
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Authentication/Deauthentication(认证/取消认证)帧" ID="ID_996050075" CREATED="1715164802866" MODIFIED="1715232329863"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      用于身份验证
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="数据帧" ID="ID_244095311" CREATED="1715232361838" MODIFIED="1715232384814"/>
</node>
</node>
<node TEXT="802.11 MAC管理实体" POSITION="top_or_left" ID="ID_1074464347" CREATED="1715233777405" MODIFIED="1715233782030">
<node TEXT="Scan" ID="ID_351735953" CREATED="1715247236274" MODIFIED="1715247284434"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      用于扫描周围的无线网络
    </p>
  </body>
</html></richcontent>
<node TEXT="Scan.request" ID="ID_1227916863" CREATED="1715247415030" MODIFIED="1715247442500"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      MLME-SCAN.request(
    </p>
    <p>
      BSSType,BSSID,SSID,ScanType,ProbeDelay,
    </p>
    <p>
      ChannelList,MinChannelTime,MaxChannelTime,
    </p>
    <p>
      RequestInformation, SSID List,
    </p>
    <p>
      ChannelUsage,AccessNetworkType,HESSID,MeshID,Vendo
    </p>
    <p>
      )
    </p>
  </body>
</html></richcontent>
<node TEXT="ACTIVE模式" ID="ID_626080100" CREATED="1715247665334" MODIFIED="1715247724270"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      STA在每个Channel(信道)上都会发出Probe Request帧用来搜索某个网络。
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="PASSIVE模式" ID="ID_1506549477" CREATED="1715247729934" MODIFIED="1715247776369"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      STA不发送任何信号,只是在ChannelList中各个信道间不断切换并等待Beacon帧。
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="Scan.confirm" ID="ID_1583414436" CREATED="1715248933229" MODIFIED="1715248953745"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      MLME-SCAN.confirm(
    </p>
    <p>
      BSSDescriptionSet,
    </p>
    <p>
      BSSDescriptionFromMeasurementPilotSet,
    </p>
    <p>
      ResultCode,VendorSpecificInfo
    </p>
    <p>
      )
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="Authenticate" ID="ID_1545655858" CREATED="1715247250727" MODIFIED="1715247305027"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      关联到某个AP前,用于STA的身份验证
    </p>
  </body>
</html></richcontent>
<node TEXT="MLME-Authenticate.request" ID="ID_1870068740" CREATED="1715250310629" MODIFIED="1715250313541"/>
<node TEXT="MLME-Authenticate.confirm" ID="ID_1822932021" CREATED="1715250338925" MODIFIED="1715250341924"/>
<node TEXT="MLME-Authenticate.indication" ID="ID_352088639" CREATED="1715250359996" MODIFIED="1715250362461"/>
<node TEXT="MLME-Authenticate.response" ID="ID_451176413" CREATED="1715250380029" MODIFIED="1715250382700"/>
</node>
<node TEXT="Associate" ID="ID_62034077" CREATED="1715247264358" MODIFIED="1715302816627"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      关联某个AP。关联成功后,STA就正式加入无线网络
    </p>
  </body>
</html></richcontent>
<node TEXT="MLME-ASSOCIATE.request" ID="ID_199498770" CREATED="1715250425724" MODIFIED="1715250427749"/>
<node TEXT="MLME-ASSOCIATE.confirm" ID="ID_1433199165" CREATED="1715250446444" MODIFIED="1715250448581"/>
<node TEXT="MLME-ASSOCIATE.indication" ID="ID_1301186700" CREATED="1715250472172" MODIFIED="1715250474997"/>
<node TEXT="MLME-ASSOCIATE.response" ID="ID_911203633" CREATED="1715250501108" MODIFIED="1715250504333"/>
</node>
</node>
<node TEXT="无线网络安全技术" POSITION="bottom_or_right" ID="ID_497165585" CREATED="1715304302691" MODIFIED="1715304306596">
<node TEXT="数据的完整性(Integrity)" ID="ID_384963906" CREATED="1715304320122" MODIFIED="1715304323571"/>
<node TEXT="数据的机密性(Confidentiality)" ID="ID_1000240147" CREATED="1715304334242" MODIFIED="1715304337779"/>
<node TEXT="身份验证和访问控制(Authentication and&#xa;Access Control)" ID="ID_1932275678" CREATED="1715304353970" MODIFIED="1715304357523"/>
<node TEXT="WEP" ID="ID_1318526088" CREATED="1715323764270" MODIFIED="1715323816077"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Wired Equivalent Privacy,有线等效加密
    </p>
  </body>
</html></richcontent>
<node TEXT="开放系统身份验证" ID="ID_1926216783" CREATED="1715324758083" MODIFIED="1715324773854"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Open System Authentication
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="共享密钥身份认证" ID="ID_1634007831" CREATED="1715324835650" MODIFIED="1715324851803"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Shared Key Authentication
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node TEXT="WPA" ID="ID_1949763878" CREATED="1715323837541" MODIFIED="1715323859661"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Wi-Fi Protected Access
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="WPA2" ID="ID_1538097217" CREATED="1715323895563" MODIFIED="1715323927432"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      RSN(Robust Security Network,强健安全网络)
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="EAP" ID="ID_1261481114" CREATED="1715327751145" MODIFIED="1715564063293"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (Extensible Authentication Protocol)
    </p>
  </body>
</html>
</richcontent>
<node TEXT="Authenticator" ID="ID_1814993268" CREATED="1715327806513" MODIFIED="1715327821889"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (验证者)
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="Supplicant" ID="ID_698225959" CREATED="1715327841152" MODIFIED="1715327864685"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (验证申请者)
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="BAS" ID="ID_533602893" CREATED="1715329954319" MODIFIED="1715330044684"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (Backend Authentication Server
    </p>
    <p>
      后端认证服务器)
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="AAA" ID="ID_141112047" CREATED="1715330159376" MODIFIED="1715330181124"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (Authentication、Authorization and
    </p>
    <p>
      Accounting,认证、授权和计费)
    </p>
  </body>
</html></richcontent>
</node>
<node TEXT="EAP Server" ID="ID_454371173" CREATED="1715330669376" MODIFIED="1715330672535"/>
<node TEXT="RSNA" ID="ID_1657683548" CREATED="1715390708295" MODIFIED="1715390729331"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (Robust Secure Network Association,强健安全网络联合)
    </p>
  </body>
</html></richcontent>
<node TEXT="Pairwise key" ID="ID_1128125005" CREATED="1715563040938" MODIFIED="1715563044963"/>
<node TEXT="PMK" ID="ID_17771756" CREATED="1715563093354" MODIFIED="1715563119619"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      在STA中设置的密码叫PMK(Pairwise Master Key,成对主密钥)
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="PSK" ID="ID_141449054" CREATED="1715563169131" MODIFIED="1715563182548"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      预共享密钥(Pre-Shared Key,PSK)
    </p>
  </body>
</html>
</richcontent>
<node TEXT="WPA/WPA2-PSK" ID="ID_1446170137" CREATED="1715563230402" MODIFIED="1715563258923"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      &quot;WPA/WPA2-PSK&quot;。由于适用家庭环境,所以有些无线路由器设置界面中也叫&quot;WPA/WPA2-个人&quot;(WFA认证名为&quot;WPA/WPA2-Personal&quot;)
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="PMK和Authenticator Server" ID="ID_246115212" CREATED="1715563740939" MODIFIED="1715563806614"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      到&quot;WPA/WPA2-企业&quot;(有时叫“WPA或WPA2”,WFA认证名为&quot;WPA/WPA2-Enterprise&quot;) 要求设置RADIUS服务器地址
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="PTK" ID="ID_847584338" CREATED="1715565207756" MODIFIED="1715565216917"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (Pairwise Transient Key,成对临时Key)
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="EAPOL KEK" ID="ID_16951174" CREATED="1715565376564" MODIFIED="1715565481518"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (Key Encryption Key)用来加密密钥生成消息
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="EAPOL KCK" ID="ID_1276027436" CREATED="1715565420420" MODIFIED="1715565465608"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      (Key Confirmation Key)用于计算密钥
    </p>
    <p>
      生成消息的完整性校验值
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="PMKSA" ID="ID_910927483" CREATED="1715566996606" MODIFIED="1715567044207"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      PMK缓存信息的名称叫PMKSA(PMK Security Association),它包括AP的MAC地址、PMK的生命周期(lifetime),以及PMKID(PMK IDentifier,用于标示这个PMKSA,其值由PMK、AP的MAC地址、STA的MAC地址等信息用Hash计算得来)
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="4-Way Handshake" ID="ID_713290608" CREATED="1715566301421" MODIFIED="1715566303174">
<node TEXT="Authenticator生成一个Nonce(ANonce),然后利用EAPOL-Key消息将其发给Supplicant" ID="ID_224927459" CREATED="1715566338134" MODIFIED="1715566458782"/>
<node TEXT="Supplicant根据ANonce、自己生成的一个Nonce(SNonce)、自己所设置的PMK和Authenticator的MAC地址等信息进行密钥派生。Supplicant随后将SNonce以及一些信息通过第二个EAPOL-Key发送给Authenticator。" ID="ID_762275645" CREATED="1715566366853" MODIFIED="1715566453505"/>
<node TEXT="如果Supplicant密钥正确,则 Authenticator也进行密钥派生。此后,Authenticator将发送第三个EAPOL-Key给&#xa;Supplicant" ID="ID_546482551" CREATED="1715566419342" MODIFIED="1715566432663"/>
<node TEXT="Supplicant最后发送一次EAPOL-Key给Authenticator用于确认" ID="ID_411471746" CREATED="1715566487663" MODIFIED="1715566493494"/>
<node TEXT="双方将安装(Install)Key。Install的意思是指使用它们来对数据进行加密。&#xa;Supplicant和Authenticator就此完成密钥派生和组对,双方可以正常进行通信了" ID="ID_513815891" CREATED="1715566524653" MODIFIED="1715566543144"/>
</node>
</node>
</node>
<node TEXT="Linux Wi-Fi编程API" POSITION="top_or_left" ID="ID_854712954" CREATED="1715568021367" MODIFIED="1715568025728">
<node TEXT="cfg80211" ID="ID_710439021" CREATED="1715568054407" MODIFIED="1715568070872"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      驱动开发
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="nl80211" ID="ID_481081753" CREATED="1715568085647" MODIFIED="1715568116601"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      nl80211 API供用户空间进程使用以操作那些利用cfg80211 API开发的无线网卡驱动
    </p>
  </body>
</html>
</richcontent>
<node TEXT="netlink" ID="ID_302598738" CREATED="1715570825914" MODIFIED="1715570850661"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      netlink是Linux平台上一种基于socket的IPC通信机制,它支持:
    </p>
    <p>
      ·用户空间进程和Kernel通信。
    </p>
    <p>
      ·用户空间中进程间的通信。
    </p>
  </body>
</html>
</richcontent>
<node TEXT="libnl" ID="ID_1299441575" CREATED="1715570897098" MODIFIED="1715571908039"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      LA.QSSI.14.0.r1/LINUX/android/external/libnl/
    </p>
    <p>
      
    </p>
    <p>
      LA.QSSI.14.0.r1/LINUX/android/external/libnl/include/linux-private/linux/netlink.h
    </p>
    <p>
      
    </p>
    <pre>struct sockaddr_nl {
&#x9;__kernel_sa_family_t&#x9;nl_family;&#x9;/* AF_NETLINK&#x9;*/
&#x9;unsigned short&#x9;nl_pad;&#x9;&#x9;/* zero&#x9;&#x9;*/
&#x9;__u32&#x9;&#x9;nl_pid;&#x9;&#x9;/* port ID&#x9;*/
       &#x9;__u32&#x9;&#x9;nl_groups;&#x9;/* multicast groups mask */
};</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="nl80211实例" ID="ID_1535032198" CREATED="1715675485495" MODIFIED="1715675519896"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      nl80211的核心就是通过netlink机制向Kernel中的无线网卡驱动发送特定的消息。
    </p>
  </body>
</html>
</richcontent>
<node TEXT="driver_nl80211.c::wpa_driver_nl80211_scan" ID="ID_18200743" CREATED="1715675705004" MODIFIED="1715675828824"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      // 创建nl80211消息
    </p>
    <p>
      msg = nl80211_scan_common(dr v,NL80211_CMD_TRIGGER_SCAN, params);
    </p>
    <p>
      //发送netlink消息
    </p>
    <p>
      ret = send_and_recv_msgs(dr v, msg, NULL, NULL);
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="wext" ID="ID_30084884" CREATED="1715568211304" MODIFIED="1715568264039"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      Linux Wireless Extensions。一般缩写为wex或wext。这套API使得用户空间的程序能通过ioctl函数来控制无线网卡驱动
    </p>
  </body>
</html>
</richcontent>
<node TEXT="" ID="ID_539975360" CREATED="1715568797615" MODIFIED="1715568870690"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      LA.QSSI.14.0.r1/LINUX/android/external/kernel-headers/original/uapi/linux/wireless.h
    </p>
    <p>
      
    </p>
    <pre>#define WIRELESS_EXT&#x9;22</pre>
  </body>
</html>
</richcontent>
</node>
<node TEXT="" ID="ID_238666043" CREATED="1715569055081" MODIFIED="1715569082707"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      wext API在设计时参考了系统中现有数据结构及命名方式。作为区分,wext中几乎所有数据结构、类型、宏等名字中都带一个w以代表wireless。如iwreq结构
    </p>
    <p>
      体,其对应的普通数据结构类型是ifreq。
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="wext API使用实例" ID="ID_1392993926" CREATED="1715569251488" MODIFIED="1715569254754">
<node TEXT="wpa_supplicant" ID="ID_321717616" CREATED="1715569334032" MODIFIED="1715569358739"><richcontent TYPE="DETAILS">
<html>
  <head>
    
  </head>
  <body>
    <p>
      它是一个运行于用户空间的专门和无线网卡进行交互的程序
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="wpa_driver_wext_scan" ID="ID_1644238220" CREATED="1715570357810" MODIFIED="1715570582006"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <pre>/**
 * wpa_driver_wext_scan - Request the driver to initiate scan
 * @priv: Pointer to private wext data from wpa_driver_wext_init()
 * @param: Scan parameters (specific SSID to scan for (ProbeReq), etc.)
 * Returns: 0 on success, -1 on failure
 */
int wpa_driver_wext_scan(void *priv, struct wpa_driver_scan_params *params)
{
&#x9;struct wpa_driver_wext_data *drv = priv;
&#x9;struct iwreq iwr;
&#x9;int ret = 0, timeout;
&#x9;struct iw_scan_req req;
&#x9;const u8 *ssid = params-&gt;ssids[0].ssid;
&#x9;size_t ssid_len = params-&gt;ssids[0].ssid_len;

&#x9;if (ssid_len &gt; IW_ESSID_MAX_SIZE) {
&#x9;&#x9;wpa_printf(MSG_DEBUG, &quot;%s: too long SSID (%lu)&quot;,
&#x9;&#x9;&#x9;   __FUNCTION__, (unsigned long) ssid_len);
&#x9;&#x9;return -1;
&#x9;}

&#x9;os_memset(&amp;iwr, 0, sizeof(iwr));
&#x9;os_strlcpy(iwr.ifr_name, drv-&gt;ifname, IFNAMSIZ);

&#x9;if (ssid &amp;&amp; ssid_len) {
&#x9;&#x9;os_memset(&amp;req, 0, sizeof(req));
&#x9;&#x9;req.essid_len = ssid_len;
&#x9;&#x9;req.bssid.sa_family = ARPHRD_ETHER;
&#x9;&#x9;os_memset(req.bssid.sa_data, 0xff, ETH_ALEN);
&#x9;&#x9;os_memcpy(req.essid, ssid, ssid_len);
&#x9;&#x9;iwr.u.data.pointer = (caddr_t) &amp;req;
&#x9;&#x9;iwr.u.data.length = sizeof(req);
&#x9;&#x9;iwr.u.data.flags = IW_SCAN_THIS_ESSID;
&#x9;}

&#x9;if (ioctl(drv-&gt;ioctl_sock, SIOCSIWSCAN, &amp;iwr) &lt; 0) {
&#x9;&#x9;wpa_printf(MSG_ERROR, &quot;ioctl[SIOCSIWSCAN]: %s&quot;,
&#x9;&#x9;&#x9;   strerror(errno));
&#x9;&#x9;ret = -1;
&#x9;}

&#x9;/* Not all drivers generate &quot;scan completed&quot; wireless event, so try to
&#x9; * read results after a timeout. */
&#x9;timeout = 10;
&#x9;if (drv-&gt;scan_complete_events) {
&#x9;&#x9;/*
&#x9;&#x9; * The driver seems to deliver SIOCGIWSCAN events to notify
&#x9;&#x9; * when scan is complete, so use longer timeout to avoid race
&#x9;&#x9; * conditions with scanning and following association request.
&#x9;&#x9; */
&#x9;&#x9;timeout = 30;
&#x9;}
&#x9;wpa_printf(MSG_DEBUG, &quot;Scan requested (ret=%d) - scan timeout %d &quot;
&#x9;&#x9;   &quot;seconds&quot;, ret, timeout);
&#x9;eloop_cancel_timeout(wpa_driver_wext_scan_timeout, drv, drv-&gt;ctx);
&#x9;eloop_register_timeout(timeout, 0, wpa_driver_wext_scan_timeout, drv,
&#x9;&#x9;&#x9;       drv-&gt;ctx);

&#x9;return ret;
}</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="iw" ID="ID_534689290" CREATED="1715568668665" MODIFIED="1715568695900"><richcontent TYPE="DETAILS" HIDDEN="true">
<html>
  <head>
    
  </head>
  <body>
    <p>
      &quot;iw&quot; 是 &quot;wireless tools for Linux&quot; 的缩写，是一个用于配置和管理无线网络接口的命令行工具。&quot;iw&quot; 命令通常用于以下一些常见的操作：
    </p>
    <ol>
      <li>
        <p>
          查看无线网络接口信息：使用 &quot;iw dev&quot; 命令可以查看当前系统中的无线网络接口信息，包括接口名称、支持的频段、信号强度等。
        </p>
      </li>
      <li>
        <p>
          扫描可用的无线网络：通过 &quot;iw dev <interface>&#xa0;scan&quot; 命令可以扫描周围可用的无线网络，并列出它们的SSID、信号强度等信息。</interface>
        </p>
      </li>
      <li>
        <p>
          连接到无线网络：使用 &quot;iw dev <interface>&#xa0;connect <ssid>&quot; 命令可以连接到指定的无线网络，需要输入密码等连接信息。</ssid></interface>
        </p>
      </li>
      <li>
        <p>
          配置无线网络接口：可以使用 &quot;iw&quot; 命令来配置无线网络接口的各种参数，如设置频道、功率、传输速率等。
        </p>
      </li>
      <li>
        <p>
          监控无线网络流量：&quot;iw&quot; 命令还可以用于监控无线网络接口的数据流量和传输速率，帮助用户了解网络使用情况。
        </p>
      </li>
    </ol>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</map>
